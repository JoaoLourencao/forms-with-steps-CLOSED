<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete form with steps</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</head>
<body>
        <section>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <form id="regForm" action="javascript:submitContactForm();" method="POST" enctype="multipart/form-data" >
                            <input type="hidden" name="to" value="yourEmail@email.com"/>
                            <input type="hidden" name="template" value="Your-email-template" />
                            <input type="hidden" name="Subject" value="Your Subject Menssage" />
                            <p class="questionsTitle">Steps Form:</p>
                            <!-- One "tab" for each step in the form: -->
                            <div class="tab">
                                <p class="txtdescFormData">User information:</p>
                                <p><input type="text" name="name" class="custom-select form-control" placeholder="Complete Name" style="display:block;"/></p>
                                <p><input type="email" name="email" class="custom-select form-control" placeholder="Email" style="display:block;"/></p>
                                <p><input type="text" name="tel" class="custom-select form-control telefone" placeholder="Phone Number" style="display:block";/></p>
                                <p><input type="text" name="date" class="custom-select form-control data" placeholder="Date of birth" datepicker= "data" style="display:block";/></p>
                                <p>
                                    <select name="sex" class="custom-select form-control" style="display:block" ;>
                                        <option value="" selected="selected" disabled="disabled">Sex</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                        <option value="other">Other</option>
                                    </select>     
                                </p>
                                <p>
                                    <select name="maritalstatus" class="custom-select form-control" style="display:block";>
                                        <option value="" selected="selected" disabled="disabled">Marital status</option>
                                        <option value="single">Single</option>
                                        <option value="stableunion">Stable Union</option>
                                        <option value="separte">Separate</option>
                                        <option value="divorced">Divorced</option>
                                    </select>
                                </p>
                            </div>
        
                            <div class="tab">
                                <p class="txtdescFormData">Other informations:</p>
                                <p>
                                    <select name="child" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Have children?</option>
                                        <option value="sim" name="Sim">Sim</option>
                                        <option value="nao" name="Não">Não</option>
                                    </select> 
                                </p>
                                <p>
                                    <select id="displayQuestion" name="rouboacidente" class="custom-select form-control" id="mySelect" onchange="myFunction()">
                                        <option value="" selected="selected" disabled="disabled">Sofreu algum acidente ou roubo no último ano?</option>
                                        <option id="sim" class="selector" name="yesOrNo" value="sim">Sim</option>
                                        <option value="nao" class="selector" >Não</option>
                                    </select> 
                                </p>
                                <p>
                                    <select name="seguradorasseguros" class="custom-select form-control yesQuestion" style="display:none;">
                                        <option value="Não selecionado" selected="selected">Não Selecionado</option>
                                        <option value="Alfa">Alfa Seguros</option>
                                        <option value="Aliro">Aliro Seguros</option>
                                        <option value="Allianz">Allianz</option>
                                        <option value="BBSeguro">BB Seguro</option>
                                        <option value="Bradesco">Bradesco </option>
                                        <option value="Caixa">Caixa Seguradora</option>
                                        <option value="Chubb">Chubb</option>
                                        <option value="Generali">Generali</option>
                                        <option value="HDI">HDI Seguros</option>
                                        <option value="Indiana">Indiana Seguradora</option>
                                        <option value="Itau">Itau Seguros</option>
                                        <option value="Liberty">Liberty Seguros</option>
                                        <option value="Mapfre">Mapfre Seguradora</option>
                                        <option value="Mitsui">Mitsui Seguros</option>
                                        <option value="Porto">Porto Seguro</option>
                                        <option value="Suhai">Suhai Seguros</option>
                                        <option value="Sulamérica">Sulamérica</option>
                                        <option value="Youse">Youse</option>
                                        <option value="Zurich">Zurich Seguros</option>
                                    </select>
                                </p>
                                <p><input style="display:none;" class="custom-select form-control data yesQuestion" datepicker= "data" name="dataVenc" placeholder="Data de Vencimento" type="text" /></p>
                                <p>
                                    <input style="display:none;" class="custom-select form-control yesQuestion"  name="classebonus" placeholder="Caso saiba mais, informe sua classe de Bônus" onkeydown="return false" type="number" min="0" max="10" />   
                                </p>
                            </div>
                            <div class="tab">
                                <p class="txtdescFormData">Dados do Veículo:</p>
                                <p>
                                    <select name="marcasveic" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Marcas</option>
                                        <option value="volvo">Volvo</option>
                                        <option value="saab">Saab</option>
                                        <option value="fiat">Fiat</option>
                                        <option value="audi">Audi</option>
                                    </select>
                                </p>
                                <p><input class="custom-select form-control" id="modelo" name="modeloveic" placeholder="Modelo" type="text" /></p>
                                <p>
                                    <select name="veiczero" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Veículo ZERO KM?</option>
                                        <option id="sim" name="yesOrNo" value="sim">Sim</option>
                                        <option value="nao">Não</option>
                                    </select> 
                                </p>
                                <p>
                                    <input class="custom-select form-control" id="anofabveic" name="anofabveic" placeholder="Ano de Fabricação" type="number" />  
                                </p>
                                <p>
                                    <input class="custom-select form-control" id="anomodelveic" name="anomodelveic" placeholder="Ano do Modelo" type="number" />       
                                </p>
                                <p>
                                    <input class="custom-select form-control" id="placa" name="placaveic" placeholder="Placa" type="text" onkeyup="this.value = this.value.toUpperCase();" maxlength="7" />  
                                </p>
                            </div>
                            <div class="tab">
                                <p class="txtdescFormData">Dados do Condutor:</p>
                                <p>
                                    <select name="condprincipal" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Você é principal condutor do veículo?</option>
                                        <option id="sim" name="sim" value="sim">Sim</option>
                                        <option value="nao">Não</option>
                                    </select> 
                                </p>
                                <p>
                                    <input type="text" name="nomecondutor" class="custom-select form-control" required placeholder="Nome Completo" />
                                </p>
                                <p>
                                    <input type="text" name="cpfcondutor" class="custom-select form-control cpf" required placeholder="CPF" type="number"/>
                                </p>
                                <p>
                                    <input class="custom-select form-control data" id="date"  datepicker= "data" name="datanasccond" placeholder="Data de Nascimento" type="text"/>
                                </p>
                                <p>
                                    <select name="sexocond" class="custom-select form-control" required>
                                        <option value="" selected="selected" disabled="disabled">Sexo</option>
                                        <option value="masculino">Masculino</option>
                                        <option value="feminino">Feminino</option>
                                        <option value="outro">Outro</option>
                                    </select>    
                                </p>
                                <p>
                                    <select name="estadocivilcond" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Estado Civil</option>
                                        <option value="Solteiro(a)">Solteiro(a)</option>
                                        <option value="UniãoEstável">União Estável</option>
                                        <option value="Separado(a)">Separado(a)</option>
                                        <option value="Divorciado(a)">Divorciado(a)</option>
                                    </select>  
                                </p>
                                <p>
                                    <input class="custom-select form-control" id="profissaocondutor" name="profissaocondutor" placeholder="Profissão" type="text" />  
                                </p>
                                <p>
                                    <select name="relacaosegurado" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Qual relação com Segurado?</option>
                                        <option value="Filhos">Filhos</option>
                                        <option value="Pais">Pais</option>
                                        <option value="Conjugês">Conjugês</option>
                                        <option value="Sócio/Diretor">Sócio/Diretor</option>
                                        <option value="Funcionários">Funcionários</option>
                                        <option value="Outros">Outros</option>
                                    </select>
                                </p>
                                <p>
                                     <select name="jovens" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Mora com jovens com menos de 26 anos?</option>
                                        <option value="simutilizam">Sim e utilizam veículo</option>
                                        <option value="naoutilizam">Sim e não utilizam o veículo</option>
                                        <option value="nao">Não</option>
                                    </select>
                                </p>
                            </div>
                            <div class="tab">
                                <p class="txtdescFormData">Dados do Uso do Veículo:</p>
                                <p>
                                    <input type="text" name="cep" class="custom-select form-control cep" required placeholder="CEP" type="text"/>
                                </p>
                                <p>
                                    <select name="garagemresidencia" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Possui Garagem na Residência?</option>
                                        <option value="simportaoeletronico">Sim, com portão eletrônico</option>
                                        <option value="simportaomanual">Sim, com portão manual</option>
                                        <option value="naopossuo">Não possuo</option>
                                    </select>
                                </p>
                                <p>
                                     <select name="garagemtrabalho" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Possui Garagem no Trabalho?</option>
                                        <option value="Sim">Sim</option>
                                        <option value="Nao">Não</option>
                                        <option value="naoparaofim">Não utiliza para esse fim</option>
                                    </select>
                                </p>
                                <p>
                                    <select name="garagemestudo" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Possui Garagem no Curso/Estudo?</option>
                                        <option value="Sim">Sim</option>
                                        <option value="Nao">Não</option>
                                        <option value="naoparaofim">Não utiliza para esse fim</option>
                                    </select>
                                </p>
                            </div>
                            <div class="tab">
                                <p class="txtdescFormData">Questões importantes:</p>
                                <p>
                                    <input type="text" name="cep" class="custom-select form-control cep" required placeholder="CEP" type="text"/>
                                </p>
                                <p>
                                    <select name="contatoquestoes" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Como você prefere falar com a gente?</option>
                                        <option value="Whatsapp">Whatsapp</option>
                                        <option value="Telefone">Telefone</option>
                                        <option value="E-mail">E-mail</option>
                                        <option value="Todas as Opções">Todas as Opções</option>
                                    </select>
                                </p>
                                <p>
                                     <select name="horarioquestoes" class="custom-select form-control">
                                        <option value="" selected="selected" disabled="disabled">Qual o melhor horário pra falar com você?</option>
                                        <option value="0700as0830">07hs às 08:30</option>
                                        <option value="0831as1000">08:31 às 10:00</option>
                                        <option value="1001as1200">10:01 ao 12:00</option>
                                        <option value="1201as1400">12:01 às 14:00</option>
                                        <option value="1401as1630">14:01 às 16:30</option>
                                        <option value="1631as1800">16:31 às 18:00</option>
                                        <option value="apos1800">Após as 18hs</option>
                                    </select>
                                </p>
                            </div>
                            <div style="overflow:auto;"> 
                                <div style="float:right;"> 
                                    <button type="button" id="prevBtn" onclick="nextPrev(-1)">Anterior</button> 
                                    <button type="button" id="nextBtn" onclick="nextPrev(1)">Próximo</button> 
                                </div> 
                            </div>
                            <!-- Circles which indicates the steps of the form: -->
                            <div style="text-align:center;margin-top:40px;">
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                                <span class="step"></span>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    
            <script>
        var currentTab = 0; // Current tab is set to be the first tab (0)
        showTab(currentTab); // Display the current tab
        
        function showTab(n) {
          // This function will display the specified tab of the form...
          var x = document.getElementsByClassName("tab");
          x[n].style.display = "block";
          //... and fix the Previous/Next buttons:
          if (n == 0) {
            document.getElementById("prevBtn").style.display = "none";
          } else {
            document.getElementById("prevBtn").style.display = "inline";
          }
          if (n == (x.length - 1)) {
            document.getElementById("nextBtn").innerHTML = "Enviar";
          } else {
            document.getElementById("nextBtn").innerHTML = "Próximo";
          }
          //... and run a function that will display the correct step indicator:
          fixStepIndicator(n)
        }
        
        function nextPrev(n) {
            
            // This function will figure out which tab to display
            var x = document.getElementsByClassName("tab");
            // Exit the function if any field in the current tab is invalid:
            if (n == 1 && !validateForm()) return false;
            // if you have reached the end of the form...
            if (currentTab >= (x.length - 1) ) {
                // ... the form gets submitted:
                document.getElementById("regForm").submit();
        
                return false;
            }else{
                // Hide the current tab:
                x[currentTab].style.display = "none";
                // Increase or decrease the current tab by 1:
                currentTab = currentTab + n;
                // Otherwise, display the correct tab:
                showTab(currentTab);
            }
        }
        
        function validateForm() {
          // This function deals with validation of the form fields
          var x, y, i, valid = true;
          x = document.getElementsByClassName("tab");
          y = x[currentTab].getElementsByTagName("input");
          z = x[currentTab].getElementsByTagName("select");
          
          console.log(y);
          // A loop that checks every input field in the current tab:
          for (i = 0; i < y.length; i++) {
            
            
            if (y[i].style.display == "none") {
              // and set the current valid status to false
              valid = true;
            }else{
                // If a field is empty...
                if (y[i].value == "") {
                // add an "invalid" class to the field:
                y[i].className += " invalid invalid:placeholder";
                // and set the current valid status to false
                valid = false;
                }
            }
        
            
            
          }
        
          for (i = 0; i < z.length; i++){
            if(z[i].style.display == "none"){
                valid = true;
            }else {
                if (z[i].value == "") {
                // add an "invalid" class to the field:
                z[i].className += " invalid";
                // and set the current valid status to false
                valid = false;
                }
            }
            }   
          // If the valid status is true, mark the step as finished and valid:
          if (valid) {
            document.getElementsByClassName("step")[currentTab].className += " finish";
          }
          return valid; // return the valid status
        }
        
        function fixStepIndicator(n) {
          // This function removes the "active" class of all steps...
          var i, x = document.getElementsByClassName("step");
          for (i = 0; i < x.length; i++) {
            x[i].className = x[i].className.replace(" active", "");
          }
          //... and adds the "active" class on the current step:
          x[n].className += " active";
        }
        
        $(document).ready(function(){
            var date_input=$('input[datepicker="data"]'); //our date input has the name "date"
            var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
            var options={
                format: 'dd/mm/yyyy',
                container: container,
                todayHighlight: true,
                autoclose: true,
            };
            date_input.datepicker(options);
            })
        
            function myFunction() {
                    var x = document.getElementById("displayQuestion").value;
                    console.log(x);
        
                    if (x == "sim") { // hide the div that is not selected
                        $('.yesQuestion').css("display", "block");
                    }else{
                        $('.yesQuestion').css("display", "none");
                    }
        
                }
        
                submitContactForm = function () {
                    var url = '/sistema/notificacao';
                    var $form = $('#regForm');
                    var data = new FormData($form[0]);
        
                    $form.lock();
                    $.ajax({
                        url: url,
                        type: 'POST',
                        data: data,
                        cache: false,
                        contentType: false,
                        processData: false,
                    }).done(function (response) {
                        $form.unlock();
                        if (response.Code == 204)
                            return;
                        if (response.Code == 200){
                            $form[0].reset();
                            var host = window.location.hostname;
                            var path = '@CMS.Functions.Url("Confirm-form-page")/#form-oeste-auto';
                            window.location.assign(path);    
                        }
                        else{
                            swal({
                                type: 'error',
                                title: 'Ops!!!',
                                text: response.Error,
                                buttonsStyling: false,
                                confirmButtonClass: 'btn btn-error'
                            });
                        }
                    });
                }
        
        </script>
</body>
</html>